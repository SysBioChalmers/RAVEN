<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
                "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
  <title>Description of modelAbilitiesTests</title>
  <meta name="keywords" content="modelAbilitiesTests">
  <meta name="description" content="run this test case with the command">
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
  <meta name="generator" content="m2html v1.5 &copy; 2003-2005 Guillaume Flandin">
  <meta name="robots" content="index, follow">
  <link type="text/css" rel="stylesheet" href="../../m2html.css">
</head>
<body>
<a name="_top"></a>
<div><a href="../../index.html">Home</a> &gt;  <a href="#">testing</a> &gt; <a href="index.html">unit_tests</a> &gt; modelAbilitiesTests.m</div>

<!--<table width="100%"><tr><td align="left"><a href="../../index.html"><img alt="<" border="0" src="../../left.png">&nbsp;Master index</a></td>
<td align="right"><a href="index.html">Index for testing\unit_tests&nbsp;<img alt=">" border="0" src="../../right.png"></a></td></tr></table>-->

<h1>modelAbilitiesTests
</h1>

<h2><a name="_name"></a>PURPOSE <a href="#_top"><img alt="^" border="0" src="../../up.png"></a></h2>
<div class="box"><strong>run this test case with the command</strong></div>

<h2><a name="_synopsis"></a>SYNOPSIS <a href="#_top"><img alt="^" border="0" src="../../up.png"></a></h2>
<div class="box"><strong>function tests = modelAbilitiesTests </strong></div>

<h2><a name="_description"></a>DESCRIPTION <a href="#_top"><img alt="^" border="0" src="../../up.png"></a></h2>
<div class="fragment"><pre class="comment">run this test case with the command
results = runtests('modelAbilitiesTests.m')</pre></div>

<!-- crossreference -->
<h2><a name="_cross"></a>CROSS-REFERENCE INFORMATION <a href="#_top"><img alt="^" border="0" src="../../up.png"></a></h2>
This function calls:
<ul style="list-style-image:url(../../matlabicon.gif)">
</ul>
This function is called by:
<ul style="list-style-image:url(../../matlabicon.gif)">
</ul>
<!-- crossreference -->

<h2><a name="_subfunctions"></a>SUBFUNCTIONS <a href="#_top"><img alt="^" border="0" src="../../up.png"></a></h2>
<ul style="list-style-image:url(../../matlabicon.gif)">
<li><a href="#_sub1" class="code">function canConsumeTest(testCase)</a></li><li><a href="#_sub2" class="code">function canProduceTest(testCase)</a></li><li><a href="#_sub3" class="code">function checkProductionTest(testCase)</a></li><li><a href="#_sub4" class="code">function consumeSomethingTest(testCase)</a></li><li><a href="#_sub5" class="code">function makeSomethingTest(testCase)</a></li><li><a href="#_sub6" class="code">function getElementalBalanceTest(testCase)</a></li><li><a href="#_sub7" class="code">function getAllowedBoundsTest(testCase)</a></li><li><a href="#_sub8" class="code">function getEssentialRxnsTest(testCase)</a></li></ul>

<h2><a name="_source"></a>SOURCE CODE <a href="#_top"><img alt="^" border="0" src="../../up.png"></a></h2>
<div class="fragment"><pre>0001 <span class="comment">%run this test case with the command</span>
0002 <span class="comment">%results = runtests('modelAbilitiesTests.m')</span>
0003 <a name="_sub0" href="#_subfunctions" class="code">function tests = modelAbilitiesTests</a>
0004 tests = functiontests(localfunctions);
0005 <span class="keyword">end</span>
0006 
0007 <a name="_sub1" href="#_subfunctions" class="code">function canConsumeTest(testCase)</a>
0008 <span class="comment">%Load the model in RAVEN format</span>
0009 sourceDir=fileparts(fileparts(fileparts(which(mfilename))));
0010 load(fullfile(sourceDir,<span class="string">'testing'</span>,<span class="string">'unit_tests'</span>,<span class="string">'test_data'</span>,<span class="string">'ecoli_textbook.mat'</span>), <span class="string">'model'</span>);
0011 
0012 testOut=canConsume(model,{<span class="string">'r5p_c'</span>;<span class="string">'ru5p_DASH_D_c'</span>;<span class="string">'s7p_c'</span>;<span class="string">'succ_c'</span>;<span class="string">'succ_e'</span>;<span class="string">'succoa_c'</span>;<span class="string">'xu5p_DASH_D_c'</span>});
0013 
0014 testCheck=[true;true;true;true;true;false;true];
0015 
0016 verifyEqual(testCase,testOut,testCheck)
0017 <span class="keyword">end</span>
0018 
0019 <a name="_sub2" href="#_subfunctions" class="code">function canProduceTest(testCase)</a>
0020 <span class="comment">%Load the model in RAVEN format</span>
0021 sourceDir=fileparts(fileparts(fileparts(which(mfilename))));
0022 load(fullfile(sourceDir,<span class="string">'testing'</span>,<span class="string">'unit_tests'</span>,<span class="string">'test_data'</span>,<span class="string">'ecoli_textbook.mat'</span>), <span class="string">'model'</span>);
0023 
0024 testOut=canProduce(model,{<span class="string">'r5p_c'</span>;<span class="string">'ru5p_DASH_D_c'</span>;<span class="string">'s7p_c'</span>;<span class="string">'succ_c'</span>;<span class="string">'succ_e'</span>;<span class="string">'succoa_c'</span>;<span class="string">'xu5p_DASH_D_c'</span>});
0025 
0026 testCheck=[true;true;true;true;true;false;true];
0027 
0028 verifyEqual(testCase,testOut,testCheck)
0029 <span class="keyword">end</span>
0030 
0031 <a name="_sub3" href="#_subfunctions" class="code">function checkProductionTest(testCase)</a>
0032 <span class="comment">%Load the model in RAVEN format</span>
0033 sourceDir=fileparts(fileparts(fileparts(which(mfilename))));
0034 load(fullfile(sourceDir,<span class="string">'testing'</span>,<span class="string">'unit_tests'</span>,<span class="string">'test_data'</span>,<span class="string">'ecoli_textbook.mat'</span>), <span class="string">'model'</span>);
0035 
0036 [testOut.np, testOut.npn, testOut.nfpm,testOut.mtc,~]=checkProduction(model,true,model.comps,false);
0037 
0038 testCheck.np=[10;13;16;17;21;30;32;37;49;50;51;52;53;64;65;71];
0039 testCheck.npn={<span class="string">'Acetyl-CoA[c]'</span>;<span class="string">'ADP[c]'</span>;<span class="string">'AMP[c]'</span>;<span class="string">'ATP[c]'</span>;<span class="string">'Coenzyme A[c]'</span>;<span class="string">'D-Fructose[e]'</span>;<span class="string">'Fumarate[e]'</span>;<span class="string">'L-Glutamine[e]'</span>;<span class="string">'L-Malate[e]'</span>;<span class="string">'NAD[c]'</span>;<span class="string">'NADH[c]'</span>;<span class="string">'NADP[c]'</span>;<span class="string">'NADPH[c]'</span>;<span class="string">'Ubiquinone-8[c]'</span>;<span class="string">'Ubiquinol-8[c]'</span>;<span class="string">'Succinyl-CoA[c]'</span>};
0040 testCheck.nfpm=[true,false,false,false,true,false,false,false,false,false,false,false,false,false,false,true;false,true,true,true,false,false,false,false,false,false,false,false,false,false,false,false;false,true,true,true,false,false,false,false,false,false,false,false,false,false,false,false;false,true,true,true,false,false,false,false,false,false,false,false,false,false,false,false;true,false,false,false,true,false,false,false,false,false,false,false,false,false,false,true;false,false,false,false,false,true,false,false,false,false,false,false,false,false,false,false;false,false,false,false,false,false,true,false,false,false,false,false,false,false,false,false;false,false,false,false,false,false,false,true,false,false,false,false,false,false,false,false;false,false,false,false,false,false,false,false,true,false,false,false,false,false,false,false;false,false,false,false,false,false,false,false,false,true,true,false,false,false,false,false;false,false,false,false,false,false,false,false,false,true,true,false,false,false,false,false;false,false,false,false,false,false,false,false,false,false,false,true,true,false,false,false;false,false,false,false,false,false,false,false,false,false,false,true,true,false,false,false;false,false,false,false,false,false,false,false,false,false,false,false,false,true,true,false;false,false,false,false,false,false,false,false,false,false,false,false,false,true,true,false;true,false,false,false,true,false,false,false,false,false,false,false,false,false,false,true];
0041 testCheck.mtc={<span class="string">'Acetyl-CoA[c] (connects 3 metabolites)'</span>;<span class="string">'ADP[c] (connects 3 metabolites)'</span>;<span class="string">'NAD[c] (connects 2 metabolites)'</span>;<span class="string">'NADP[c] (connects 2 metabolites)'</span>;<span class="string">'Ubiquinone-8[c] (connects 2 metabolites)'</span>;<span class="string">'D-Fructose[e] (connects 1 metabolites)'</span>;<span class="string">'Fumarate[e] (connects 1 metabolites)'</span>;<span class="string">'L-Glutamine[e] (connects 1 metabolites)'</span>;<span class="string">'L-Malate[e] (connects 1 metabolites)'</span>};
0042 
0043 verifyEqual(testCase,testOut,testCheck)
0044 <span class="keyword">end</span>
0045 
0046 <a name="_sub4" href="#_subfunctions" class="code">function consumeSomethingTest(testCase)</a>
0047 <span class="comment">%Load the model in RAVEN format</span>
0048 sourceDir=fileparts(fileparts(fileparts(which(mfilename))));
0049 load(fullfile(sourceDir,<span class="string">'testing'</span>,<span class="string">'unit_tests'</span>,<span class="string">'test_data'</span>,<span class="string">'ecoli_textbook.mat'</span>), <span class="string">'model'</span>);
0050 
0051 [testOut.s, testOut.m]=consumeSomething(model,{<span class="string">'r5p_c'</span>;<span class="string">'ru5p_DASH_D_c'</span>;<span class="string">'s7p_c'</span>;<span class="string">'succ_c'</span>;<span class="string">'succ_e'</span>;<span class="string">'succoa_c'</span>;<span class="string">'xu5p_DASH_D_c'</span>});
0052 <span class="comment">% Simplify output for later check, no need for high precision</span>
0053 <span class="comment">% testOut.s(abs(testOut.s)&lt;1e-10)=0;</span>
0054 <span class="comment">% testOut.s=round(testOut.s,4)</span>
0055 testCheck.s=[0;0;1.4591;0;0;1.4591;0;0;0;0;8.39;4.0126;0;1.4591;0;2.9183;0;1.4591;0;1.4591;0;0;1.4591;0;0;0;0;0;0;0;1.4591;0;0;0;0;-1.4591;1.4591;0;0;0;0;0;0;0;0;0;0;0;-1.4591;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;2.9183;0;0;-1.4591;1.4591;0;0;0;-1.4591;0;1.4591;1.4591;0;0;0;-1.4591;1.4591;0;0;0;0;0;0;0;0;0;0;0;0];
0056 testCheck.m=[33];
0057 
0058 verifyEqual(testCase,testOut,testCheck,<span class="string">'AbsTol'</span>,1e-4)
0059 <span class="keyword">end</span>
0060 
0061 <a name="_sub5" href="#_subfunctions" class="code">function makeSomethingTest(testCase)</a>
0062 <span class="comment">%Load the model in RAVEN format</span>
0063 sourceDir=fileparts(fileparts(fileparts(which(mfilename))));
0064 load(fullfile(sourceDir,<span class="string">'testing'</span>,<span class="string">'unit_tests'</span>,<span class="string">'test_data'</span>,<span class="string">'ecoli_textbook.mat'</span>), <span class="string">'model'</span>);
0065 
0066 [testOut.s, testOut.m]=makeSomething(model,{<span class="string">'r5p_c'</span>;<span class="string">'ru5p_DASH_D_c'</span>;<span class="string">'s7p_c'</span>;<span class="string">'succ_c'</span>;<span class="string">'succ_e'</span>;<span class="string">'succoa_c'</span>;<span class="string">'xu5p_DASH_D_c'</span>});
0067 <span class="comment">% Simplify output for later check, no need for high precision</span>
0068 <span class="comment">% testOut.s(abs(testOut.s)&lt;1e-10)=0;</span>
0069 <span class="comment">% testOut.s=round(testOut.s,4);</span>
0070 
0071 testCheck.s=[0;0;1.8644;0;0;0;0;0;0;0;8.39;4.6611;0;0;0;3.7289;0;1.8644;0;0;0;0;0;0;0;0;0;-0.93220;0;0;0;0;0;0;0;-1.8644;0;0;0;0.93220;0;0;0;0;0;0;0;0;-1.8644;0.93220;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;3.7289;0;0;-1.8644;1.8644;0.93220;0;-0.93220;-1.8644;0;1.8644;0;0;0;0;-1.8644;0.93220;0;0;0;0;0;0;0;0;0;0;0;0.93220];
0072 testCheck.m=[6];
0073 
0074 verifyEqual(testCase,testOut,testCheck,<span class="string">'AbsTol'</span>,1e-4)
0075 <span class="keyword">end</span>
0076 
0077 <a name="_sub6" href="#_subfunctions" class="code">function getElementalBalanceTest(testCase)</a>
0078 <span class="comment">%Load the model in RAVEN format</span>
0079 sourceDir=fileparts(fileparts(fileparts(which(mfilename))));
0080 load(fullfile(sourceDir,<span class="string">'testing'</span>,<span class="string">'unit_tests'</span>,<span class="string">'test_data'</span>,<span class="string">'ecoli_textbook.mat'</span>), <span class="string">'model'</span>);
0081 
0082 testOut=getElementalBalance(model,1);
0083 
0084 testCheck.balanceStatus=1;
0085 testCheck.elements.abbrevs={<span class="string">'C'</span>;<span class="string">'N'</span>;<span class="string">'O'</span>;<span class="string">'S'</span>;<span class="string">'P'</span>;<span class="string">'H'</span>};
0086 testCheck.elements.names={<span class="string">'carbon'</span>;<span class="string">'nitrogen'</span>;<span class="string">'oxygen'</span>;<span class="string">'sulfur'</span>;<span class="string">'phosphorus'</span>;<span class="string">'hydrogen'</span>};
0087 testCheck.leftComp=[44,14,31,1,5,62];
0088 testCheck.rightComp=[44,14,31,1,5,62];
0089 
0090 verifyEqual(testCase,testOut,testCheck)
0091 <span class="keyword">end</span>
0092 
0093 <a name="_sub7" href="#_subfunctions" class="code">function getAllowedBoundsTest(testCase)</a>
0094 <span class="comment">%Load the model in RAVEN format</span>
0095 sourceDir=fileparts(fileparts(fileparts(which(mfilename))));
0096 load(fullfile(sourceDir,<span class="string">'testing'</span>,<span class="string">'unit_tests'</span>,<span class="string">'test_data'</span>,<span class="string">'ecoli_textbook.mat'</span>), <span class="string">'model'</span>);
0097 
0098 
0099 [testOut.min, testOut.max, testOut.flag]=getAllowedBounds(model,[1:10],false);
0100 <span class="comment">% Simplify output for later check, no need for high precision</span>
0101 <span class="comment">% testOut.min(abs(testOut.min)&lt;1e-10)=0;</span>
0102 <span class="comment">% testOut.min=single(testOut.min);</span>
0103 <span class="comment">% testOut.max(abs(testOut.max)&lt;1e-10)=0;</span>
0104 <span class="comment">% testOut.max=single(testOut.max);</span>
0105 
0106 testCheck.min=[-20;0;0;0;0;0;-166.610;0;0;0];
0107 testCheck.max=[0;20;20;20;20;20;0;20;10;20];
0108 testCheck.flag=[1,1;1,1;1,1;1,1;1,1;1,1;1,1;1,1;1,1;1,1];
0109 
0110 verifyEqual(testCase,testOut,testCheck,<span class="string">'AbsTol'</span>,1e-4)
0111 <span class="keyword">end</span>
0112 
0113 <a name="_sub8" href="#_subfunctions" class="code">function getEssentialRxnsTest(testCase)</a>
0114 <span class="comment">%Load the model in RAVEN format</span>
0115 sourceDir=fileparts(fileparts(fileparts(which(mfilename))));
0116 load(fullfile(sourceDir,<span class="string">'testing'</span>,<span class="string">'unit_tests'</span>,<span class="string">'test_data'</span>,<span class="string">'ecoli_textbook.mat'</span>), <span class="string">'model'</span>);
0117 
0118 [testOut.r, testOut.i]=getEssentialRxns(model);
0119 
0120 testCheck.r={<span class="string">'EX_glc'</span>;<span class="string">'GLCpts'</span>};
0121 testCheck.i=[28;50];
0122 verifyEqual(testCase,testOut,testCheck)
0123 <span class="keyword">end</span></pre></div>
<hr><address>Generated by <strong><a href="http://www.artefact.tk/software/matlab/m2html/" title="Matlab Documentation in HTML">m2html</a></strong> &copy; 2005</address>
</body>
</html>