<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
                "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
  <title>Description of checkInstallation</title>
  <meta name="keywords" content="checkInstallation">
  <meta name="description" content="checkInstallation">
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
  <meta name="generator" content="m2html v1.5 &copy; 2003-2005 Guillaume Flandin">
  <meta name="robots" content="index, follow">
  <link type="text/css" rel="stylesheet" href="../m2html.css">
</head>
<body>
<a name="_top"></a>
<div><a href="../index.html">Home</a> &gt;  <a href="index.html">installation</a> &gt; checkInstallation.m</div>

<!--<table width="100%"><tr><td align="left"><a href="../index.html"><img alt="<" border="0" src="../left.png">&nbsp;Master index</a></td>
<td align="right"><a href="index.html">Index for installation&nbsp;<img alt=">" border="0" src="../right.png"></a></td></tr></table>-->

<h1>checkInstallation
</h1>

<h2><a name="_name"></a>PURPOSE <a href="#_top"><img alt="^" border="0" src="../up.png"></a></h2>
<div class="box"><strong>checkInstallation</strong></div>

<h2><a name="_synopsis"></a>SYNOPSIS <a href="#_top"><img alt="^" border="0" src="../up.png"></a></h2>
<div class="box"><strong>function checkInstallation(develMode) </strong></div>

<h2><a name="_description"></a>DESCRIPTION <a href="#_top"><img alt="^" border="0" src="../up.png"></a></h2>
<div class="fragment"><pre class="comment"> checkInstallation
   The purpose of this function is to check if all necessary functions are
   installed and working. It also checks whether there are any functions
   with overlapping names between RAVEN and other toolboxes or
   user-defined functions, which are accessible from MATLAB pathlist

   Input: 
   develMode       logical indicating development mode, which includes
                   testing of binaries that are required to update KEGG
                   HMMs (opt, default false)

   Usage: checkInstallation(develMode)</pre></div>

<!-- crossreference -->
<h2><a name="_cross"></a>CROSS-REFERENCE INFORMATION <a href="#_top"><img alt="^" border="0" src="../up.png"></a></h2>
This function calls:
<ul style="list-style-image:url(../matlabicon.gif)">
<li><a href="checkFunctionUniqueness.html" class="code" title="function checkFunctionUniqueness()">checkFunctionUniqueness</a>	checkFunctionUniqueness</li></ul>
This function is called by:
<ul style="list-style-image:url(../matlabicon.gif)">
</ul>
<!-- crossreference -->

<h2><a name="_subfunctions"></a>SUBFUNCTIONS <a href="#_top"><img alt="^" border="0" src="../up.png"></a></h2>
<ul style="list-style-image:url(../matlabicon.gif)">
<li><a href="#_sub1" class="code">function res = interpretResults(results)</a></li><li><a href="#_sub2" class="code">function str = myStr(InputStr,len)</a></li><li><a href="#_sub3" class="code">function status = makeBinaryExecutable()</a></li></ul>

<h2><a name="_source"></a>SOURCE CODE <a href="#_top"><img alt="^" border="0" src="../up.png"></a></h2>
<div class="fragment"><pre>0001 <a name="_sub0" href="#_subfunctions" class="code">function checkInstallation(develMode)</a>
0002 <span class="comment">% checkInstallation</span>
0003 <span class="comment">%   The purpose of this function is to check if all necessary functions are</span>
0004 <span class="comment">%   installed and working. It also checks whether there are any functions</span>
0005 <span class="comment">%   with overlapping names between RAVEN and other toolboxes or</span>
0006 <span class="comment">%   user-defined functions, which are accessible from MATLAB pathlist</span>
0007 <span class="comment">%</span>
0008 <span class="comment">%   Input:</span>
0009 <span class="comment">%   develMode       logical indicating development mode, which includes</span>
0010 <span class="comment">%                   testing of binaries that are required to update KEGG</span>
0011 <span class="comment">%                   HMMs (opt, default false)</span>
0012 <span class="comment">%</span>
0013 <span class="comment">%   Usage: checkInstallation(develMode)</span>
0014 
0015 <span class="keyword">if</span> nargin&lt;1
0016     develMode=false;
0017 <span class="keyword">end</span>
0018 
0019 <span class="comment">%Get the RAVEN path</span>
0020 [ST, I]=dbstack(<span class="string">'-completenames'</span>);
0021 [ravenDir,~,~]=fileparts(fileparts(ST(I).file));
0022 
0023 fprintf(<span class="string">'\n*** THE RAVEN TOOLBOX ***\n\n'</span>);
0024 <span class="comment">%Print the RAVEN version if it is not the development version</span>
0025 fprintf([<a href="#_sub2" class="code" title="subfunction str = myStr(InputStr,len)">myStr</a>(<span class="string">' &gt; Installing from location'</span>,40) <span class="string">'%f'</span>]);
0026 fprintf(<span class="string">'%s\n'</span>,ravenDir)
0027 fprintf([<a href="#_sub2" class="code" title="subfunction str = myStr(InputStr,len)">myStr</a>(<span class="string">' &gt; Checking RAVEN release'</span>,40) <span class="string">'%f'</span>]);
0028 <span class="keyword">if</span> exist(fullfile(ravenDir,<span class="string">'version.txt'</span>), <span class="string">'file'</span>) == 2
0029     currVer = fgetl(fopen(fullfile(ravenDir,<span class="string">'version.txt'</span>)));
0030     fclose(<span class="string">'all'</span>);
0031     fprintf([currVer <span class="string">'\n'</span>]);
0032     <span class="keyword">try</span>
0033         newVer=strtrim(webread(<span class="string">'https://raw.githubusercontent.com/SysBioChalmers/RAVEN/main/version.txt'</span>));
0034         newVerNum=str2double(strsplit(newVer,<span class="string">'.'</span>));
0035         currVer=str2double(strsplit(currVer,<span class="string">'.'</span>));
0036         <span class="keyword">for</span> i=1:3
0037             <span class="keyword">if</span> currVer(i)&lt;newVerNum(i)
0038                 fprintf([<a href="#_sub2" class="code" title="subfunction str = myStr(InputStr,len)">myStr</a>(<span class="string">'   &gt; Latest RAVEN release available'</span>,40) <span class="string">'%f'</span>])
0039                 fprintf([<span class="string">'[\b'</span> newVer,<span class="string">']\b\n'</span>])
0040                 hasGit=exist(fullfile(ravenDir,<span class="string">'.git'</span>),<span class="string">'file'</span>);
0041                 <span class="keyword">if</span> hasGit==7
0042                     fprintf(<span class="string">'     [\bRun git pull in your favourite git client]\b\n'</span>)
0043                     fprintf(<span class="string">'     [\bto get the latest RAVEN release]\b\n'</span>);
0044                 <span class="keyword">else</span>
0045                     fprintf([<a href="#_sub2" class="code" title="subfunction str = myStr(InputStr,len)">myStr</a>(<span class="string">'     [\bInstructions on how to upgrade]\b'</span>,40) <span class="string">'%f'</span>])
0046                     fprintf(<span class="string">'&lt;a href=&quot;https://github.com/SysBioChalmers/RAVEN/wiki/Installation#upgrade-to-latest-raven-release&quot;&gt;here&lt;/a&gt;\n'</span>);
0047                 <span class="keyword">end</span>
0048                 <span class="keyword">break</span>
0049             <span class="keyword">elseif</span> i==3
0050                 fprintf(<span class="string">'   &gt; You are running the latest RAVEN release\n'</span>);
0051             <span class="keyword">end</span>
0052         <span class="keyword">end</span>
0053     <span class="keyword">catch</span>
0054         fprintf([<a href="#_sub2" class="code" title="subfunction str = myStr(InputStr,len)">myStr</a>(<span class="string">'   &gt; Checking for latest RAVEN release'</span>,40) <span class="string">'%f'</span>])
0055         fprintf(<span class="string">'[\bFail]\b\n'</span>);
0056         fprintf(<span class="string">'     [\bCannot reach GitHub for release info]\b\n'</span>);
0057     <span class="keyword">end</span>
0058 <span class="keyword">else</span>
0059     fprintf(<span class="string">'DEVELOPMENT\n'</span>);
0060 <span class="keyword">end</span>
0061 
0062 fprintf([<a href="#_sub2" class="code" title="subfunction str = myStr(InputStr,len)">myStr</a>(<span class="string">' &gt; Checking MATLAB release'</span>,40) <span class="string">'%f'</span>])
0063 fprintf([version(<span class="string">'-release'</span>) <span class="string">'\n'</span>])
0064 fprintf([<a href="#_sub2" class="code" title="subfunction str = myStr(InputStr,len)">myStr</a>(<span class="string">' &gt; Checking system architecture'</span>,40) <span class="string">'%f'</span>])
0065 fprintf([computer(<span class="string">'arch'</span>),<span class="string">'\n'</span>])
0066 
0067 fprintf([<a href="#_sub2" class="code" title="subfunction str = myStr(InputStr,len)">myStr</a>(<span class="string">' &gt; Set RAVEN in MATLAB path'</span>,40) <span class="string">'%f'</span>])
0068 subpath=regexp(genpath(ravenDir),pathsep,<span class="string">'split'</span>); <span class="comment">%List all subdirectories</span>
0069 pathsToKeep=cellfun(@(x) ~contains(x,<span class="string">'.git'</span>),subpath) &amp; cellfun(@(x) ~contains(x,<span class="string">'doc'</span>),subpath);
0070 <span class="keyword">try</span>
0071     addpath(strjoin(subpath(pathsToKeep),pathsep));
0072     fprintf(<span class="string">'Pass\n'</span>);
0073     fprintf([<a href="#_sub2" class="code" title="subfunction str = myStr(InputStr,len)">myStr</a>(<span class="string">' &gt; Save MATLAB path'</span>,40) <span class="string">'%f'</span>])
0074     <span class="keyword">try</span>
0075         savepath
0076         fprintf(<span class="string">'Pass\n'</span>)   
0077     <span class="keyword">catch</span>
0078         fprintf(<span class="string">'[\bFail]\b\n'</span>)
0079         fprintf([<span class="string">'   You might have to rerun checkInstallation again\n'</span><span class="keyword">...</span>
0080                  <span class="string">'   next time you start up MATLAB\n'</span>])        
0081     <span class="keyword">end</span>
0082 <span class="keyword">catch</span>
0083     fprintf(<span class="string">'[\bFail]\b\n'</span>)
0084 <span class="keyword">end</span>
0085 
0086 <span class="keyword">if</span> isunix
0087     fprintf([<a href="#_sub2" class="code" title="subfunction str = myStr(InputStr,len)">myStr</a>(<span class="string">'   &gt; Make binaries executable'</span>,40) <span class="string">'%f'</span>])
0088     status = <a href="#_sub3" class="code" title="subfunction status = makeBinaryExecutable()">makeBinaryExecutable</a>();
0089     <span class="keyword">if</span> status == 0
0090         fprintf(<span class="string">'Pass\n'</span>)
0091     <span class="keyword">else</span>
0092         fprintf(<span class="string">'[\bFail]\b\n'</span>)
0093     <span class="keyword">end</span>
0094 <span class="keyword">end</span>
0095 
0096 <span class="comment">%Check if it is possible to parse an Excel file</span>
0097 fprintf(<span class="string">'\n=== Model import and export ===\n'</span>);
0098 fprintf([<a href="#_sub2" class="code" title="subfunction str = myStr(InputStr,len)">myStr</a>(<span class="string">' &gt; Add Java paths for Excel format'</span>,40) <span class="string">'%f'</span>])
0099 <span class="keyword">try</span>
0100     <span class="comment">%Add the required classes to the static Java path if not already added</span>
0101     addJavaPaths();
0102     fprintf(<span class="string">'Pass\n'</span>)
0103 <span class="keyword">catch</span>
0104     fprintf(<span class="string">'[\bFail]\b\n'</span>)
0105 <span class="keyword">end</span>
0106 fprintf([<a href="#_sub2" class="code" title="subfunction str = myStr(InputStr,len)">myStr</a>(<span class="string">' &gt; Checking libSBML version'</span>,40) <span class="string">'%f'</span>])
0107 <span class="keyword">try</span>
0108     evalc(<span class="string">'importModel(fullfile(ravenDir,''tutorial'',''empty.xml''))'</span>);
0109     <span class="keyword">try</span>
0110         libSBMLver=OutputSBML; <span class="comment">% Only works in libSBML 5.17.0+</span>
0111         fprintf([libSBMLver.libSBML_version_string <span class="string">'\n'</span>]);
0112     <span class="keyword">catch</span>
0113         fprintf(<span class="string">'[\bFail]\b\n'</span>)
0114         fprintf(<span class="string">'   An older libSBML version was found, update to version 5.17.0 or higher for a significant improvement of model import\n'</span>);
0115     <span class="keyword">end</span>
0116 <span class="keyword">catch</span>
0117     fprintf(<span class="string">'[\bFail]\b\n'</span>)
0118     fprintf(<span class="string">'   Download libSBML from http://sbml.org/Software/libSBML/Downloading_libSBML and add to MATLAB path\n'</span>);
0119 <span class="keyword">end</span>
0120 fprintf(<span class="string">' &gt; Checking model import and export\n'</span>)
0121 [~,res]=evalc(&quot;runtests(<span class="string">'importExportTests.m'</span>);&quot;);
0122 
0123 fprintf([<a href="#_sub2" class="code" title="subfunction str = myStr(InputStr,len)">myStr</a>(<span class="string">'   &gt; Import Excel format'</span>,40) <span class="string">'%f'</span>])
0124 <span class="keyword">if</span> res(1).Passed == 1
0125     fprintf(<span class="string">'Pass\n'</span>)
0126 <span class="keyword">else</span>
0127     fprintf(<span class="string">'[\bFail]\b\n'</span>)
0128 <span class="keyword">end</span>
0129 
0130 fprintf([<a href="#_sub2" class="code" title="subfunction str = myStr(InputStr,len)">myStr</a>(<span class="string">'   &gt; Export Excel format'</span>,40) <span class="string">'%f'</span>])
0131 <span class="keyword">if</span> res(3).Passed == 1
0132     fprintf(<span class="string">'Pass\n'</span>)
0133 <span class="keyword">else</span>
0134     fprintf(<span class="string">'[\bFail]\b\n'</span>)
0135 <span class="keyword">end</span>
0136 
0137 fprintf([<a href="#_sub2" class="code" title="subfunction str = myStr(InputStr,len)">myStr</a>(<span class="string">'   &gt; Import SBML format'</span>,40) <span class="string">'%f'</span>])
0138 <span class="keyword">if</span> res(2).Passed == 1
0139     fprintf(<span class="string">'Pass\n'</span>)
0140 <span class="keyword">else</span>
0141     fprintf(<span class="string">'[\bFail]\b\n'</span>)
0142 <span class="keyword">end</span>
0143 
0144 fprintf([<a href="#_sub2" class="code" title="subfunction str = myStr(InputStr,len)">myStr</a>(<span class="string">'   &gt; Export SBML format'</span>,40) <span class="string">'%f'</span>])
0145 <span class="keyword">if</span> res(4).Passed == 1
0146     fprintf(<span class="string">'Pass\n'</span>)
0147 <span class="keyword">else</span>
0148     fprintf(<span class="string">'[\bFail]\b\n'</span>)
0149 <span class="keyword">end</span>
0150 
0151 <span class="keyword">if</span> res(1).Passed~=1 &amp;&amp; res(3).Passed~=1 &amp;&amp; exist(<span class="string">'vaderSentimentScores.m'</span>,<span class="string">'file'</span>)==2
0152     fprintf([<span class="string">'   &gt; MATLAB Text Analytics Toolbox found. This should be\n'</span><span class="keyword">...</span>
0153              <span class="string">'     uninstalled if you want to read/write Excel files.\n'</span><span class="keyword">...</span>
0154              <span class="string">'     See RAVEN GitHub Issues page for instructions.\n'</span>])
0155 <span class="keyword">end</span>
0156 
0157 <span class="comment">%Check if it is possible to import an YAML model</span>
0158 <span class="comment">% fprintf(' &gt; Checking import of model in YAML format:\t\t\t');</span>
0159 <span class="comment">% try</span>
0160 <span class="comment">%     readYaml(ymlFile,true);</span>
0161 <span class="comment">%     fprintf('Pass\n');</span>
0162 <span class="comment">% catch</span>
0163 <span class="comment">%     fprintf('[\bFail]\b\n');</span>
0164 <span class="comment">% end</span>
0165 
0166 fprintf(<span class="string">'\n=== Model solvers ===\n'</span>);
0167 
0168 <span class="comment">%Get current solver. Set it to 'none', if it is not set</span>
0169 fprintf(<span class="string">' &gt; Checking for LP solvers\n'</span>)
0170 [~,res]=evalc(&quot;runtests(<span class="string">'solverTests.m'</span>);&quot;);
0171 
0172 fprintf([<a href="#_sub2" class="code" title="subfunction str = myStr(InputStr,len)">myStr</a>(<span class="string">'   &gt; glpk'</span>,40) <span class="string">'%f'</span>])
0173 <span class="keyword">if</span> res(1).Passed == 1
0174     fprintf(<span class="string">'Pass\n'</span>)
0175 <span class="keyword">else</span>
0176     fprintf(<span class="string">'[\bFail]\b\n'</span>)
0177 <span class="keyword">end</span>
0178 
0179 fprintf([<a href="#_sub2" class="code" title="subfunction str = myStr(InputStr,len)">myStr</a>(<span class="string">'   &gt; gurobi'</span>,40) <span class="string">'%f'</span>])
0180 <span class="keyword">if</span> res(2).Passed == 1
0181     fprintf(<span class="string">'Pass\n'</span>)
0182 <span class="keyword">else</span>
0183     fprintf(<span class="string">'[\bFail]\b\n'</span>)
0184 <span class="keyword">end</span>
0185 
0186 fprintf([<a href="#_sub2" class="code" title="subfunction str = myStr(InputStr,len)">myStr</a>(<span class="string">'   &gt; soplex'</span>,40) <span class="string">'%f'</span>])
0187 <span class="keyword">if</span> res(3).Passed == 1
0188     fprintf(<span class="string">'Pass\n'</span>)
0189 <span class="keyword">else</span>
0190     fprintf(<span class="string">'[\bFail]\b\n'</span>)
0191 <span class="keyword">end</span>
0192 
0193 fprintf([<a href="#_sub2" class="code" title="subfunction str = myStr(InputStr,len)">myStr</a>(<span class="string">'   &gt; cobra'</span>,40) <span class="string">'%f'</span>])
0194 <span class="keyword">if</span> res(4).Passed == 1
0195     fprintf(<span class="string">'Pass\n'</span>)
0196 <span class="keyword">else</span>
0197     fprintf(<span class="string">'[\bFail]\b\n'</span>)
0198 <span class="keyword">end</span>
0199 fprintf([<a href="#_sub2" class="code" title="subfunction str = myStr(InputStr,len)">myStr</a>(<span class="string">' &gt; Set RAVEN solver'</span>,40) <span class="string">'%f'</span>])
0200 <span class="keyword">try</span>
0201     oldSolver=getpref(<span class="string">'RAVEN'</span>,<span class="string">'solver'</span>);
0202     solverIdx=find(strcmp(oldSolver,{<span class="string">'glpk'</span>,<span class="string">'gurobi'</span>,<span class="string">'soplex'</span>,<span class="string">'cobra'</span>}));
0203 <span class="keyword">catch</span>
0204     solverIdx=0;
0205 <span class="keyword">end</span>
0206 <span class="comment">% Do not change old solver if functional</span>
0207 <span class="keyword">if</span> solverIdx~=0 &amp;&amp; res(solverIdx).Passed == 1
0208     fprintf([oldSolver <span class="string">'\n'</span>])
0209 <span class="comment">% Order of preference: gurobi &gt; glpk &gt; soplex &gt; cobra</span>
0210 <span class="keyword">elseif</span> res(2).Passed == 1
0211     fprintf(<span class="string">'gurobi\n'</span>)
0212     setRavenSolver(<span class="string">'gurobi'</span>);
0213 <span class="keyword">elseif</span> res(1).Passed == 1
0214     fprintf(<span class="string">'glpk\n'</span>)
0215     setRavenSolver(<span class="string">'glpk'</span>);
0216 <span class="keyword">elseif</span> res(3).Passed == 1
0217     fprintf(<span class="string">'soplex\n'</span>)
0218     setRavenSolver(<span class="string">'soplex'</span>);    
0219 <span class="keyword">elseif</span> res(4).Passed == 1
0220     fprintf(<span class="string">'cobra\n'</span>)
0221     setRavenSolver(<span class="string">'cobra'</span>);
0222 <span class="keyword">else</span>
0223     fprintf(<span class="string">'None, no functional solvers\n'</span>)
0224     fprintf(<span class="string">'    The glpk should always be working, check your RAVEN installation to make sure all files are present\n'</span>)
0225 <span class="keyword">end</span>
0226 
0227 fprintf(<span class="string">'\n=== Essential binary executables ===\n'</span>);
0228 fprintf([<a href="#_sub2" class="code" title="subfunction str = myStr(InputStr,len)">myStr</a>(<span class="string">' &gt; Checking BLAST+'</span>,40) <span class="string">'%f'</span>])
0229 [~,res]=evalc(&quot;runtests(<span class="string">'blastPlusTests.m'</span>);&quot;);
0230 res=<a href="#_sub1" class="code" title="subfunction res = interpretResults(results)">interpretResults</a>(res);
0231 <span class="keyword">if</span> res==false
0232     fprintf(<span class="string">'   This is essential to run getBlast()\n'</span>)
0233 <span class="keyword">end</span>
0234 
0235 fprintf([<a href="#_sub2" class="code" title="subfunction str = myStr(InputStr,len)">myStr</a>(<span class="string">' &gt; Checking DIAMOND'</span>,40) <span class="string">'%f'</span>])
0236 [~,res]=evalc(&quot;runtests(<span class="string">'diamondTests.m'</span>);&quot;);
0237 res=<a href="#_sub1" class="code" title="subfunction res = interpretResults(results)">interpretResults</a>(res);
0238 <span class="keyword">if</span> res==false
0239     fprintf(<span class="string">'   This is essential to run the getDiamond()\n'</span>)
0240 <span class="keyword">end</span>
0241 
0242 fprintf([<a href="#_sub2" class="code" title="subfunction str = myStr(InputStr,len)">myStr</a>(<span class="string">' &gt; Checking HMMER'</span>,40) <span class="string">'%f'</span>])
0243 [~,res]=evalc(&quot;runtests(<span class="string">'hmmerTests.m'</span>)&quot;);
0244 res=<a href="#_sub1" class="code" title="subfunction res = interpretResults(results)">interpretResults</a>(res);
0245 <span class="keyword">if</span> res==false
0246     fprintf([<span class="string">'   This is essential to run getKEGGModelFromHomology()\n'</span><span class="keyword">...</span>
0247              <span class="string">'   when using a FASTA file as input\n'</span>])
0248 <span class="keyword">end</span>
0249 
0250 <span class="keyword">if</span> develMode
0251     fprintf(<span class="string">'\n=== Development binary executables ===\n'</span>);
0252     fprintf(<span class="string">'NOTE: These binaries are only required when using KEGG FTP dump files in getKEGGModelForOrganism\n'</span>);
0253 
0254     fprintf([<a href="#_sub2" class="code" title="subfunction str = myStr(InputStr,len)">myStr</a>(<span class="string">' &gt; Checking CD-HIT'</span>,40) <span class="string">'%f'</span>])
0255     [~,res]=evalc(&quot;runtests(<span class="string">'cdhitTests.m'</span>);&quot;);
0256     <a href="#_sub1" class="code" title="subfunction res = interpretResults(results)">interpretResults</a>(res);
0257 
0258     fprintf([<a href="#_sub2" class="code" title="subfunction str = myStr(InputStr,len)">myStr</a>(<span class="string">' &gt; Checking MAFFT'</span>,40) <span class="string">'%f'</span>])
0259     [~,res]=evalc(&quot;runtests(<span class="string">'mafftTests.m'</span>);&quot;);
0260     <a href="#_sub1" class="code" title="subfunction res = interpretResults(results)">interpretResults</a>(res);
0261 <span class="keyword">end</span>
0262 
0263 fprintf(<span class="string">'\n=== Compatibility ===\n'</span>);
0264 fprintf([<a href="#_sub2" class="code" title="subfunction str = myStr(InputStr,len)">myStr</a>(<span class="string">' &gt; Checking function uniqueness'</span>,40) <span class="string">'%f'</span>])
0265 <a href="checkFunctionUniqueness.html" class="code" title="function checkFunctionUniqueness()">checkFunctionUniqueness</a>();
0266 
0267 fprintf(<span class="string">'\n*** checkInstallation complete ***\n\n'</span>);
0268 <span class="keyword">end</span>
0269 
0270 <a name="_sub1" href="#_subfunctions" class="code">function res = interpretResults(results)</a>
0271 <span class="keyword">if</span> results.Failed==0 &amp;&amp; results.Incomplete==0
0272     fprintf(<span class="string">'Pass\n'</span>);
0273     res=true;
0274 <span class="keyword">else</span>
0275     fprintf(<span class="string">'[\bFail]\b\n'</span>)
0276     fprintf(<span class="string">'   Download/compile the binary and rerun checkInstallation\n'</span>);
0277     res=false;
0278 <span class="keyword">end</span>
0279 <span class="keyword">end</span>
0280 
0281 <a name="_sub2" href="#_subfunctions" class="code">function str = myStr(InputStr,len)</a>
0282 str=InputStr;
0283 lenDiff = len - length(str);
0284 <span class="keyword">if</span> lenDiff &lt; 0
0285     warning(<span class="string">'String too long'</span>);
0286 <span class="keyword">else</span>
0287     str = [str blanks(lenDiff)];
0288 <span class="keyword">end</span>
0289 <span class="keyword">end</span>
0290 
0291 <a name="_sub3" href="#_subfunctions" class="code">function status = makeBinaryExecutable()</a>
0292 <span class="keyword">if</span> ispc
0293     status = 0; <span class="comment">% No need to run on Windows</span>
0294     <span class="keyword">return</span>;
0295 <span class="keyword">end</span>
0296 
0297 binDir = fullfile(findRAVENroot(),<span class="string">'software'</span>);
0298 
0299 binList = {fullfile(binDir,<span class="string">'blast+'</span>,<span class="string">'blastp'</span>);
0300            fullfile(binDir,<span class="string">'blast+'</span>,<span class="string">'makeblastdb'</span>);
0301            fullfile(binDir,<span class="string">'cd-hit'</span>,<span class="string">'cd-hit'</span>);
0302            fullfile(binDir,<span class="string">'diamond'</span>,<span class="string">'diamond'</span>);
0303            fullfile(binDir,<span class="string">'hmmer'</span>,<span class="string">'hmmbuild'</span>);
0304            fullfile(binDir,<span class="string">'hmmer'</span>,<span class="string">'hmmsearch'</span>);
0305            fullfile(binDir,<span class="string">'GLPKmex'</span>,<span class="string">'glpkcc'</span>);
0306            fullfile(binDir,<span class="string">'libSBML'</span>,<span class="string">'TranslateSBML'</span>);
0307            fullfile(binDir,<span class="string">'libSBML'</span>,<span class="string">'OutputSBML'</span>);
0308            fullfile(binDir,<span class="string">'mafft'</span>,<span class="string">'mafft-linux64'</span>,<span class="string">'mafft.bat'</span>);
0309            fullfile(binDir,<span class="string">'mafft'</span>,<span class="string">'mafft-mac'</span>,<span class="string">'mafft.bat'</span>);};
0310 <span class="keyword">if</span> ismac
0311     binList(1:6) = strcat(binList(1:6),<span class="string">'.mac'</span>);
0312     binList(10) = [];
0313 <span class="keyword">else</span>
0314     binList(9) = [];
0315 <span class="keyword">end</span>
0316 
0317 <span class="keyword">for</span> i=1:numel(binList)
0318     binPath = which(binList{i});
0319     [status,cmdout] = system([<span class="string">'chmod +x &quot;'</span> binPath <span class="string">'&quot;'</span>]);
0320     <span class="keyword">if</span> status ~= 0
0321         error(<span class="string">'Failed to make %s executable: %s '</span>,binList{i},strip(cmdout))
0322     <span class="keyword">end</span>
0323 <span class="keyword">end</span>
0324 <span class="keyword">end</span></pre></div>
<hr><address>Generated by <strong><a href="http://www.artefact.tk/software/matlab/m2html/" title="Matlab Documentation in HTML">m2html</a></strong> &copy; 2005</address>
</body>
</html>